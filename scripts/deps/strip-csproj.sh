#!/usr/bin/env bash

# Strips all properties and items already provided by Directory.Build.props /
# Tests/Directory.Build.props from a freshly generated .csproj file, and
# removes the boilerplate .cs stub created by `dotnet new`.
#
# Usage: strip_csproj <project_dir> <project_name> [sdk]
#   sdk defaults to "Microsoft.NET.Sdk"

function strip_csproj() {
  local project_dir="${1}"
  local project_name="${2}"
  local sdk="${3:-Microsoft.NET.Sdk}"
  local csproj="${project_dir}/${project_name}.csproj"

  cat > "${csproj}" << EOF
<Project Sdk="${sdk}">

</Project>
EOF

  # Remove boilerplate stubs generated by dotnet new
  rm -f "${project_dir}/Class1.cs" "${project_dir}/UnitTest1.cs"
}
